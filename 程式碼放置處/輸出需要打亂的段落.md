---
created: 2025-08-17 22:20
updated: 2025-08-17 22:21
---

```dataviewjs
// === 設定：要處理哪些檔案 ===
// 1) 只處理本頁：把下一行改成 const PAGES = [{ file: dv.current().file }];
// 2) 指定資料夾：把 "你的資料夾" 改成實際資料夾路徑。
const PAGES = dv.pages('"程式碼放置處/輸入欲打亂的段落"');

function shuffle(arr){
  const a = arr.slice();
  for (let i = a.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function stripFrontmatterLines(lines){
  // 跳過檔案開頭的空行
  let k = 0;
  while (k < lines.length && lines[k].trim() === "") k++;
  // 如果第一個非空行是 '---'，就略過直到下一個 '---'
  if (k < lines.length && lines[k].trim() === "---"){
    k++;
    while (k < lines.length && lines[k].trim() !== "---") k++;
    if (k < lines.length && lines[k].trim() === "---") k++;
  }
  return lines.slice(k);
}

for (const p of PAGES){
  const raw = await dv.io.load(p.file.path);
  const lines = raw.split("\n");
  const body = stripFrontmatterLines(lines);

  // 過濾掉空行，確保完全不算入
  const bodyLines = body.filter(l => l.trim() !== "");

  const out = shuffle(bodyLines).join("\n").trimEnd();

  dv.header(3, p.file.name);
  dv.el("pre", out);
}

```

